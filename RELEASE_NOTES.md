# Release notes

Release notes for the SLAC's LCLS2 HPS MPS EPICS Module.

## Releases:

* __4.3.0__: 2025-02-10 J. Mock
  * Change processing of \_SS and \_SO PVs to process
    each time they are FLNKed rather than process on change

* __4.2.0__: 2025-01-28 J. Lorelli 
  * Upgrade to asyn/R4.39-1.0.2, yamlLoader/R2.3.8, l2Mps/3.10.0
  * Removed hardcoded PACKAGE\_SITE\_TOP pointing at AFS

* __4.1.2__: 2024-10-14 J. Mock
  * Add PVs to maintain SALT up count PVs that don't reset to 0.

* __4.1.1__: 2024-10-08 J. Mock
  * Add PVs to listen to global reset and apply to local application

* __4.1.0__: 2024-10-08 J. Mock
  * Update mps_bpm.substitutios for BPM app
  * Edit scale.template to only write to driver (HW) upon change
  * Add PV to reset trip values by following a global PV

* __4.0.1__: 2024-09-27 J. Mock
  * Remove THR_LOADED PV - no longer needed by manager
  * Fix up bcm PVs to include only faults that are actually valid
  * Fix bug in L2MPS::writeOctet to stop runtime command line warning
  * Update version numbers in README files

* __4.0.0__: 2024-09-24 J. Mock
  * Add support for latched analog values and reset
  * Refactor MPS Manager into a soft IOC
  * Move autogenerated PV loading out of PHYSICS_TOP and into
    the module for greater transperency to the IOC engineer
    See updated README files for information about how to load the
    driver


* __R3.11.1__: 2023-08-09 M. Donadio
  * Using yamlLoader/R2.3.5.
  * Added support for RHEL7 and to build in both PCDS and EED.
  * Added checks with error messages in build-time in case
    packages are missing.

* __R3.11.0__: 2022-05-03 J. Mock
  * Build against l2Mps R3.8.0 to change how idle tables are initialized.


* __R3.10.1__: 2022-04-18 J. Mock
  * Fix IDLE table Enable type to be UInt32Digital everywhere - functionality was 
    originally with float64 type in l2MpsAsynApp/src/drvL2MPSASYN.cpp

* __R3.10.0__: 2022-04-14 J. Mock
  * Revert CHRG fault to TMIT

* __R3.9.0__: 2022-1-26 J. Mock
  * Build against asyn R4.39-1.0.1

* __R3.8.0__: 2021-11-15 J. Mock
  * Build against YAMLLOADED R2.2.0
* __R3.7.0__: 2021-08-18 J. Vasquez
  * Update `l2Mps` to version `R3.7.0`.
  * Add support for the Fast Wire Scanner (FWS) application type. This type of application
    doesn't have any application specific settings.
  * Add support for the LLRF application type. This type of application doesn't have any
    application specific settings.

* __R3.6.0__: 2021-08-17 J. Vasquez
  * Add readback value of the SALT register `MpsChEnable`.
  * Add new SALT diagnostic registers: `MpsTxPktPeriod`, `MpsRxPktPeriod`, `MpsTxPktPeriodMax`,
    `MpsRxPktPeriodMax`, `MpsTxPktPeriodMin`, `MpsRxPktPeriodMin`, `DiagnosticStrbCnt`,
    `MpsPllLockCnt`, `MpsTxEofeSentCnt`, and `MpsRxErrDetCnt`.
  * Update BPM TMIT threshold. BPMs now use TMIT difference, expressed in `pC`. So, for the TMIT
    threshold related PVs rename the PVs, replacing `TMIT` with `CHRG`, change units from `Nel`
    to `pC`, and change the scale factor PV from `$(P):TMIT_FWSCL` to `$(P):CHRG_FWSCL`.

* __R3.5.0__: 2021-02-05 J. Vasquez
  * Update l2Mps to version R3.5.0.
  * Add support for the new Digital Link Node. The new type is `MPS_DN`.
  * Update list of app types for MPS nodes, to match FW definitions.
    The new types are `MPS_LN` (for link nodes), and `MPS_AN` for application nodes.

* __R3.4.1__: 2020-05-13 J. Vasquez
  * Update l2Mps to version R3.4.1.
  * Relay on the l2Mps instantiation of a `MpsLinkNode` object to
    determine when to create the sof inputs parameters.

* __R3.4.0__: 2020-05-02 J. Vasquez
  * Update l2Mps to version R3.4.0.
  * Add support for the Link Node's software inputs.

* __R3.3.0__: 2020-02-07 J. Vasquez
  * Update versions:
    * CPSW framework to R4.4.1,
    * buildroot to 2019.08,
    * l2Mps to R3.3.0, and
    * yamlLoader to R2.1.0
    * asyn to R4.32-1.0.0

* __R3.2.0__: 2019-09-24 J. Vasquez
  * Merge R2-branch into master. That updates CPSW framework to version
    R4.3.1, and yamlLoader to version R1.1.5.
  * Update l2Mps to version R3.2.0.

* __R3.1.1__: 2019-09-24 J. Vasquez
  * Bug fix: Fix scale PV name for BCM and BLEN applications.
  * Bug fix: add a missing colon in the mps_blm.substitution file.

* __R3.1.0__: 2019-09-23 J. Vasquez
  * Update versions: CPSW framework to R4.2.0, l2Mps to R3.1.0 and
    yamlLoader to R1.1.4.

* __R3.0.0__: 2019-07-31 J. Vasquez
  * Update l2Mps to version R3.0.0.
  * Update the scale PV which are now described by two values,
    a slope and an offset value. See the [README.scaleFactor.md](README.scaleFactor.md)
    for more details.
  * Add support to connect to the MPS manager service when the
    IOC starts, to request for the thresholds PV to be updated.
    See [README.thresholds.md](README.thresholds.md) for details.
  * Add support to read the raw values (values read directly from
    the FPGA registers) of the thresholds.
  * Add support to read the EPICS database and firmware configuration
    files generated by the MPS database. See [README.database.md](README.database.md)
    for details.

* __R2.7.0__: 2021-03-16 J. Vasquez
  * Update BPM TMIT threshold. BPMs now use TMIT difference, expressed in `pC`. So, for the TMIT
    threshold related PVs rename the PVs, replacing `TMIT` with `CHRG`, change units from `Nel`
    to `pC`, and change the scale factor PV from `$(P):TMIT_FWSCL` to `$(P):CHRG_FWSCL`.

* __R2.6.0__: 2020-02-05 J. Vasquez
  * Update buildroot to version 2019.08
  * Update CPSW to version R4.4.1
  * Update l2Mps to version R2.4.0
  * Update yamlLoader to version R2.1.0

* __R2.5.1__: 2019-11-18 K. Kim
  * build with asyn R4.32-1.0.0

* __R2.5.0__: 2019-10-29 J. Vasquez
  * Update versions: CPSW framework to R4.3.1, l2Mps to R2.3.0 and
    yamlLoader to R1.1.5.

* __R2.4.0__: 2019-09-23 J. Vasquez
  * Update versions: CPSW framework to R4.2.0, l2Mps to R2.2.0 and
    yamlLoader to R1.1.4.

* __R2.3.2__: 2019-08-16 J. Vasquez
  * Bug fix: Fix scale PV name for BCM and BLEN applications.
  * Bug fix: add a missing colon in the mps_blm.substitution file.

* __R2.3.1__: 2019-08-13 J. Vasquez
  * Update l2Mps to version R2.1.2. That version includes a bug fix
    where an argument name was shadowing the protected member name.
    This was causing the polling thread to consume a lot of CPU.

* __R2.3.0__: 2019-07-18 J. Vasquez
  * Use initHooks to request a threshold restore to the MpsManager
    when the IOC boots.

* __R2.2.1__: 2019-07-12 J. Vasquez
  * Update CPSW framework to version R4.1.2, and l2Mps to version
    R2.1.1.

* __R2.2.0__: 2019-06-27 J. Vasquez
  * Update CPSW framework to version R4.1.0, l2Mps to version
    R2.1.0, and yamlLoader to version R1.1.3.

* __R2.1.0__: 2019-06-12 J. Vasquez
  * Addition of info(autosaveFields) to thr.template, this will
    enable autosave for thresholds and threshold enable PVs.
  * Disable the MPS application when the EPICS module is loaded.
    So, the MPS application will start disabled by default every
    time the IOC boots.

* __R2.0.0__: 2019-02-27 J. Vasquez
  * Update l2Mps to version R2.0.0. Now the threshold scale factor
    is divided into a slope and a offset value.
  * Update CPSW framework to version R3.6.6, boost to 1.64.0 and
    yaml-cpp to yaml-cpp-0.5.3_boost-1.64.0.
  * Update yamlLoader to version R1.1.2.
  * Set PINI=YES for passive records, so that restored values during
    IOC init get written to FW.

* __R1.2.0__: 2018-10-26 J.Vasquez
  * Update l2Mps to R1.2.0 and CPSW framework to R3.6.4

* __R1.1.0__: 2018-06-28 J. Vasquez
  * Update l2Mps driver to version R1.1.0.
  * The new l2Mps API send pairs of data and valid flags; use
    the status flag to set the record status and severity
    accordingly.

* __R1.0.2__: 2018-06-18 J. Vasquez
  * Update l2Mps driver to version R1.0.2.
  * se std::bind to set the callback fucntion, which are now of
    type std::function.
  * Remove the static methods and the global object pointer.
  * Remove boost_system library from makefile.
  * Update dependecies instruction in README file.

* __R1.0.1__: 2018-04-09 J. Vasquez
  * Update l2Mps driver to version R1.0.1.
  * Update yamlLoader version to R1.1.0.
  * Fix compiler warnings.

* __R1.0.0__: 2018-02-27 J. Vasquez
  * First stable release.
